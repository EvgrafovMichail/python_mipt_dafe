from lsm_project.lsm.enumerations import MismatchStrategies
from lsm_project.lsm.models import (
    LSMDescription,
    LSMLines,
)


# данные для теста test_get_lsm_description_validation
wrong_abscissa = [
    1, [1, 2], [1, 2, 3, 'string']
]
wrong_ordinates = [
    None, (1, 2), [1, 2, 3, 4]
]
wrong_args_exceptions = [
    TypeError, ValueError, ValueError
]
description_wrong_ids = [
    'invalid-type', 'invalid-len', 'invalid-elems'
]


# данные для теста test_get_lsm_description_missmatch
strategies = [
    MismatchStrategies.FALL, 'wrong-strategy'
]
strategies_exception = [RuntimeError, ValueError]
strategies_ids = ['fall', 'invalid']


# данные для теста test_get_lsm_description_computitions
abscissa = [
    -2.0,
    -1.7894736842105263,
    -1.5789473684210527,
    -1.368421052631579,
    -1.1578947368421053,
    -0.9473684210526316,
    -0.736842105263158,
    -0.5263157894736843,
    -0.3157894736842106,
    -0.10526315789473695,
    0.10526315789473673,
    0.3157894736842106,
    0.5263157894736841,
    0.7368421052631575,
    0.9473684210526314,
    1.1578947368421053,
    1.3684210526315788,
    1.5789473684210522,
    1.789473684210526,
    2.0
]
ordinates = [
    [
        -10.618265866667329,
        -9.075769196850382,
        -7.01987401354302,
        -6.875034650835992,
        -5.644335147495369,
        -4.673081021673832,
        -3.807861769466778,
        -3.2068019149772353,
        -2.3312794065871962,
        -1.0047547728270385,
        0.9428698814607848,
        1.5251309194711669,
        3.0005239648942044,
        3.787898267369031,
        4.798481859816331,
        6.316882876034116,
        7.307887346978733,
        8.375562660548871,
        9.036896498773647,
        9.476627357649695
    ],
    [
        1.3817341333326714,
        1.6610729084127764,
        2.4538101969832966,
        1.3354916649534823,
        1.3030332735572632,
        1.0111295046419575,
        0.6131908621121701,
        -0.04890717813512968,
        -0.4365425644819323,
        -0.3731758254586167,
        0.3112909340923644,
        -0.3696059226340968,
        -0.15737077194790022,
        -0.6331543642099141,
        -0.8857286664994583,
        -0.630485545018516,
        -0.9026389688107399,
        -1.0981215499774413,
        -1.6999456064895095,
        -2.5233726423503056
    ],
    [
        1.3817341333326714,
        1.8715992242022501,
        2.874862828562244,
        1.9670706123219033,
        2.145138536715158,
        2.0637610835893256,
        1.876348756849012,
        1.424777032391186,
        1.247667961833857,
        1.5215610166466464,
        2.416554091987101,
        1.9461835510501138,
        2.368945017525784,
        2.1036877410532435,
        2.0616397545531733,
        2.5274091918235895,
        2.465782083820839,
        2.480825818443611,
        2.0895280777210163,
        1.4766273576496944
    ],
    [
        -2.6182658666673286,
        -2.12840077579775,
        -1.125137171437756,
        -2.0329293876780965,
        -1.8548614632848421,
        -1.9362389164106741,
        -2.123651243150988,
        -2.575222967608814,
        -2.752332038166143,
        -2.4784389833533536,
        -1.5834459080128989,
        -2.053816448949886,
        -1.6310549824742162,
        -1.8963122589467567,
        -1.938360245446827,
        -1.4725908081764105,
        -1.5342179161791611,
        -1.519174181556389,
        -1.9104719222789834,
        -2.5233726423503056
    ],
    [
        -8.618265866667329,
        -7.0757691968503815,
        -5.01987401354302,
        -4.875034650835992,
        -3.6443351474953687,
        -2.6730810216738328,
        -1.8078617694667778,
        -1.2068019149772353,
        -0.331279406587196,
        0.9952452271729616,
        2.9428698814607848,
        3.525130919471167,
        5.000523964894204,
        5.787898267369031,
        6.798481859816331,
        8.316882876034116,
        9.307887346978733,
        10.375562660548871,
        11.036896498773647,
        11.476627357649695
    ]
]
descriptions = [
    LSMDescription(
        incline=5.070,
        shift=0.016,
        incline_error=0.081,
        shift_error=0.099
    ),
    LSMDescription(
        incline=-0.930,
        shift=0.016,
        incline_error=0.081,
        shift_error=0.099
    ),
    LSMDescription(
        incline=0.070,
        shift=2.016,
        incline_error=0.081,
        shift_error=0.099
    ),
    LSMDescription(
        incline=0.070,
        shift=-1.984,
        incline_error=0.081,
        shift_error=0.099
    ),
    LSMDescription(
        incline=5.070,
        shift=2.016,
        incline_error=0.081,
        shift_error=0.099
    )
]
computition_ids = [
    'incline-pos',
    'incline-neg',
    'shift-pos',
    'shift-neg',
    'incline-shift'
]


# данные для теста test_get_lsm_lines_description_incorrect
descriptions_incorrect = [
    [1, 2, 3, 4], {'incline': 1, 'shift': 2}
]
descriptions_incorrect_ids = ['list', 'dict']


# данные для теста test_get_lsm_lines_computition
descriptions_correct = [
    None,
    LSMDescription(
        incline=5.070,
        shift=2.016,
        incline_error=0.081,
        shift_error=0.099
    )
]
lines_expected = [
    LSMLines(
        abscissa=abscissa,
        ordinates=ordinates[-1],
        line_predicted=[
            -8.124194046771436,
            -7.056848863574061,
            -5.9895036803766875,
            -4.922158497179312,
            -3.8548133139819387,
            -2.7874681307845646,
            -1.72012294758719,
            -0.6527777643898158,
            0.41456741880755854,
            1.481912602004933,
            2.549257785202307,
            3.6166029683996825,
            4.683948151597056,
            5.751293334794429,
            6.818638517991804,
            7.885983701189179,
            8.953328884386552,
            10.020674067583926,
            11.0880192507813,
            12.155364433978676
        ],
        line_above=[
            -8.188202520847563,
            -7.1037139802702,
            -6.019225439692837,
            -4.934736899115474,
            -3.85024835853811,
            -2.765759817960747,
            -1.6812712773833836,
            -0.5967827368060208,
            0.48770580377134265,
            1.5721943443487056,
            2.656682884926069,
            3.741171425503433,
            4.825659966080796,
            5.910148506658157,
            6.994637047235521,
            8.079125587812886,
            9.163614128390247,
            10.24810266896761,
            11.332591209544974,
            12.417079750122339
        ],
        line_under=[
            -8.060185572695307,
            -7.009983746877922,
            -5.959781921060538,
            -4.909580095243152,
            -3.8593782694257666,
            -2.809176443608381,
            -1.7589746177909957,
            -0.7087727919736106,
            0.34142903384377465,
            1.39163085966116,
            2.4418326854785453,
            3.4920345112959317,
            4.542236337113316,
            5.5924381629307,
            6.642639988748086,
            7.6928418145654724,
            8.743043640382858,
            9.793245466200242,
            10.843447292017629,
            11.893649117835015
        ]
    ),
    LSMLines(
        abscissa=abscissa,
        ordinates=ordinates[-1],
        line_predicted=[
            -8.124,
            -7.0566315789473695,
            -5.989263157894737,
            -4.9218947368421055,
            -3.8545263157894745,
            -2.7871578947368425,
            -1.719789473684211,
            -0.6524210526315795,
            0.41494736842105207,
            1.4823157894736836,
            2.549684210526315,
            3.617052631578948,
            4.684421052631579,
            5.751789473684209,
            6.819157894736842,
            7.8865263157894745,
            8.953894736842106,
            10.021263157894735,
            11.088631578947368,
            12.156
        ],
        line_above=[
            -8.187000000000001,
            -7.102578947368421,
            -6.018157894736843,
            -4.933736842105264,
            -3.8493157894736854,
            -2.7648947368421064,
            -1.680473684210527,
            -0.5960526315789481,
            0.4883684210526311,
            1.57278947368421,
            2.6572105263157892,
            3.741631578947369,
            4.826052631578947,
            5.910473684210525,
            6.994894736842105,
            8.079315789473686,
            9.163736842105262,
            10.248157894736842,
            11.332578947368422,
            12.417000000000002
        ],
        line_under=[
            -8.061,
            -7.010684210526316,
            -5.960368421052632,
            -4.910052631578948,
            -3.8597368421052636,
            -2.8094210526315795,
            -1.7591052631578952,
            -0.7087894736842106,
            0.34152631578947323,
            1.3918421052631573,
            2.4421578947368414,
            3.492473684210527,
            4.54278947368421,
            5.593105263157893,
            6.643421052631578,
            7.693736842105263,
            8.744052631578947,
            9.79436842105263,
            10.844684210526314,
            11.895
        ]
    )
]
descriptions_correct_ids = ['no-description', 'description']


# данные для теста test_get_report
report_expected = '\n'.join([
    'LSM computing result'.center(100, "="), '',
    f'[INFO]: incline: {5.070:.{3}f};',
    f'[INFO]: shift: {2.016:.{3}f};',
    f'[INFO]: incline error: {0.081:.{3}f};',
    f'[INFO]: shift error: {0.099:.{3}f};',
    '', ''.center(100, "=")
])
